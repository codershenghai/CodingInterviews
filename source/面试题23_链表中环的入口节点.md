# 题目描述

给一个链表，若其中包含环，请找出该链表的环的入口结点，否则，输出null。

# 题解

## 基本思路

1. 首先要确定这个链表中包含环。
2. 然后找到环的长度，根据环的长度找到环的入口节点。

先上**结论**，然后再证明：

- 结论1：设置快慢指针，快指针每次走一步，慢指针每次走两步，假如链表中有环，它们一定在环中相遇。

- 结论2：假设环的长度是n，先让快指针走n步，然后快慢指针一起出发，每次一起走一步，最后一定相遇于环的入口节点。

## 证明

- 证明1：快指针先进入环，慢指针后进入环，快指针走的比慢指针快，一定可以追上慢指针，只是时间问题。
- 证明2：假设环的长度是n，环的入口节点到链表头结点之间的长度是k。快指针先向前移动n步，则此刻节点的位置距离环的入口节点的距离为n-k，那么此刻节点的位置绕环一圈到环的入口节点的距离为n-(n-k)=k，与环的入口节点到链表头结点的距离相同，即证明快慢指针最后一定相遇于环的入口节点。

```java
public ListNode EntryNodeOfLoop(ListNode head) {
    // 当头结点为空或只有一个头结点时，一定没有环
    if (head == null || head.next == null)
        return null;
    ListNode low = head, fast = head;
    int cycleLength = 1;
    while (low != null && fast != null) {
        low = low.next;
        fast = fast.next.next;
        // 根据结论1，当low和fast相遇时，链表中一定有环，然后计算环的长度
        if (low == fast) {
            fast = fast.next;
            while (low != fast) {
                fast = fast.next;
                cycleLength++;
            }
            break;
        }
    }
    // 如果链表没有环，则low或fast指针到达链表末尾，为空
    if (low == null || fast == null)
        return null;
    // 重置low和fast指针，根据结论2寻找环的入口节点
    low = head; fast = head;
    while (cycleLength-- > 0)
        fast = fast.next;
    while (low != fast) {
        low = low.next;
        fast = fast.next;
    }
    return low;
}
```