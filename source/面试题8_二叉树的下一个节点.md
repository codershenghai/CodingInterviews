# 题目描述

给定一个二叉树和其中的一个结点，请找出中序遍历顺序的下一个结点并且返回。注意，树中的结点不仅包含左右子结点，同时包含指向父结点的指针。

# 题解

这道题可以分三种情况讨论：

1. pNode有右孩子，那么下一个节点是其右孩子的最左子节点。
2. pNode没有右孩子且是其父节点的左孩子，那么下一个节点是其父节点。
3. pNode没有右孩子且是其父节点的右孩子。则沿其父节点指针一直向上遍历，直到找到一个是它父节点的左子节点的节点，如果这样的节点存在，那么这个节点的父节点就是我们要找的节点。如果这样的节点不存在，根节点就是我们要找的节点。

```java
public TreeLinkNode GetNext(TreeLinkNode pNode) {
    if (pNode == null)
        return null;
    TreeLinkNode pNext = null;
    if (pNode.right != null) {
        TreeLinkNode p = pNode.right;
        while (p.left != null)
            p = p.left;
        pNext = p;
    } else if (pNode.next != null){
        TreeLinkNode pCurrent = pNode;
        TreeLinkNode pParent = pNode.next;
        while (pParent != null && pCurrent == pParent.right) {
            pCurrent = pParent;
            pParent = pParent.next;
        }
        pNext = pParent;
    }
    return pNext;
}
```